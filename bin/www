#!/usr/bin/env node

const http = require('http')
  , Scheduler = require('../api/events/scheduler')
  , log = require('../config/log')
  , app = require('../')
  , port = process.env.PORT || 3000

require('../lib/mongo')

Scheduler.start()

http.globalAgent.maxSockets = Infinity
http.createServer(app.callback())

app.listen(port)

log.info(`Rest Scheduler API - port ${port}`)
