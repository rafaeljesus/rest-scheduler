#!/usr/bin/env node

const http = require('http')

const Scheduler = require('../api/events/scheduler')
const log = require('../config/log')
const app = require('../')
const port = process.env.PORT || 3000

require('../lib/mongo')

Scheduler.start()

http.globalAgent.maxSockets = Infinity
http.createServer(app.callback())

app.listen(port)

log.info(`Rest Scheduler API - port ${port}`)
